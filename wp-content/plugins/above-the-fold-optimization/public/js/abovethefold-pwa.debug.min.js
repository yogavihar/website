Abtf[0](function(c,d){if(d.offline=function(){return{then:function(){}}},"serviceWorker"in c.navigator&&d[8]&&d[8][0]){var f=c.document,e=d[8];if(e[3]){var g,h=function(){d[15](function(){if(g!==navigator.onLine&&f.body){if(navigator.onLine){if(void 0===g)return;console.info("Abtf.offline() \u27a4 connection restored");f.body.classList.remove("offline")}else console.warn("Abtf.offline() \u27a4 connection offline"),f.body.classList.add("offline");g=!!navigator.onLine}})};c.addEventListener("online",
h);c.addEventListener("offline",h);h()}var l=function(){navigator.serviceWorker.controller.postMessage([1,e[2],e[4],e[5]])};navigator.serviceWorker.ready.then(function(){navigator.serviceWorker.controller?l():navigator.serviceWorker.addEventListener("controllerchange",function(){l()});console.info("Abtf.pwa() \u27a4 service worker ready")});e[6]&&navigator.serviceWorker.register(e[0],{scope:e[1]}).then(function(a){return new Promise(function(b,k){a.installing?a.installing.addEventListener("statechange",
function(a){"installed"==a.target.state?(console.info("Abtf.pwa() \u27a4 service worker loaded"),b()):(console.warn("Abtf.pwa() \u27a4 service worker",a.target.state),"redundant"==a.target.state&&k())}):(console.info("Abtf.pwa() \u27a4 service worker loaded"),b())})})["catch"](function(a){throw a;});navigator.serviceWorker.addEventListener("message",function(a){a&&a.data&&a.data instanceof Array&&2===a.data[0]&&f.body&&(a=new CustomEvent("sw-update",{detail:{url:a.data[1]}}),c.dispatchEvent(a))});
var m=function(a,b){navigator.serviceWorker.controller?a.apply(c,b):navigator.serviceWorker.ready.then(function(){a.apply(c,b)})},n=function(a,b){return new Promise(function(k){var c=new MessageChannel;c.port1.onmessage=function(b){b.data&&b.data.error?console.info("Abtf."+a+"() \u27a4 error",b.data.error):k(b.data)};navigator.serviceWorker.controller.postMessage(b,[c.port2])})},p=function(a,b){m(function(a){n("offline",[2,a]).then(function(a){b(a.status)})},[a,b])},q=function(a,b,c){m(function(a,
b){n("push",[3,a,b]).then(function(a){c(a.status)})},[a,b])};d.offline=function(a){return(new Promise(function(b){p(a,b)}))["catch"](function(b){console.info("Abtf.offline() \u27a4 error",b,a)})};d.push=function(a,b){return(new Promise(function(c){q(a,b,c)}))["catch"](function(c){console.info("Abtf.push() \u27a4 error",c,a,b)})}}});
